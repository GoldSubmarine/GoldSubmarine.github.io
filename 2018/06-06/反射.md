# 反射

## 获取类的三种方式

```java
import java.util.Date;
public class Test {
    // 主方法
    public static void main(String args[]) {
        Class<?> cls = new Date().getClass();   // 反射中，泛型只能写问号，通过实例获取class类对象
        Class<?> cls1 = Date.class;   // 反射中，泛型只能写问号，通过实例获取class类
        Class<?> cls2 = Class.forName("java.util.Date");   // 反射中，泛型只能写问号，通过实例获取class类

        System.out.println(cls);  // 打印class java.util.Date
        System.out.println(cls.getName());  // 打印java.util.Date

        Object obj = cls.newInstance();     // 实例化对象,等价于new java.util.Date()
        System.out.println(obj);  // 打印时间

        Method method[] = cls.getMethods();
        for(Method item : method) {
            System.out.println(item.getName()); // 循环输出所有的方法
        }
    }
}
```

## 反射调用方法

```java
package com.demo;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class Test2 {
    // 主方法
    public static void main(String args[]) throws IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException {
        Class<?> cls = Person.class;
        Object obj = cls.newInstance();

        Method setName = cls.getMethod("setName", String.class);  //通过反射取得方法
        Method setAge = cls.getMethod("setAge", Integer.class);
        Method getName = cls.getMethod("getName");
        Method getAge = cls.getMethod("getAge");

        setName.invoke(obj, "cwj"); //调用该方法
        setAge.invoke(obj, 18);

        Object name = getName.invoke(obj);
        Object age = getAge.invoke(obj);

        System.out.println(name);
        System.out.println(age);
    }
}
class Person {
    private String name;
    private int age;
    public Person() {}
    public void setName(String name) {
        this.name = name;
    }
    public String getName() {
        return this.name;
    }
    public void setAge(Integer age) {
        this.age = age;
    }
    public int getAge() {
        return this.age;
    }
}
```